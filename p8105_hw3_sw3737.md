p8105_hw3_sw3737
================
sw3737
2023-10-14

## Problem 2

# Data import

``` r
library(p8105.datasets)
data("brfss_smart2010")
```

# Data cleaning

``` r
brfss_clean <- brfss_smart2010 %>% 
  janitor::clean_names() %>%
  filter(topic == "Overall Health", 
         response %in% c("Excellent", "Very good", "Good", "Fair", "Poor")) %>% 
  mutate(response = factor(response, levels = c("Poor", "Fair", "Good", "Very good", "Excellent")))
```

# State analysis for 2002 and 2010

``` r
brfss_clean %>%
  group_by(year, locationabbr) %>%
  summarise(counties = n_distinct(locationdesc)) %>%
  filter((year == 2002 | year == 2010) & counties >= 7)
```

    ## `summarise()` has grouped output by 'year'. You can override using the
    ## `.groups` argument.

    ## # A tibble: 20 Ã— 3
    ## # Groups:   year [2]
    ##     year locationabbr counties
    ##    <int> <chr>           <int>
    ##  1  2002 CT                  7
    ##  2  2002 FL                  7
    ##  3  2002 MA                  8
    ##  4  2002 NC                  7
    ##  5  2002 NJ                  8
    ##  6  2002 PA                 10
    ##  7  2010 CA                 12
    ##  8  2010 CO                  7
    ##  9  2010 FL                 41
    ## 10  2010 MA                  9
    ## 11  2010 MD                 12
    ## 12  2010 NC                 12
    ## 13  2010 NE                 10
    ## 14  2010 NJ                 19
    ## 15  2010 NY                  9
    ## 16  2010 OH                  8
    ## 17  2010 PA                  7
    ## 18  2010 SC                  7
    ## 19  2010 TX                 16
    ## 20  2010 WA                 10

In 2002, 6 states were observed at 7 or more locations (CT, FL, MA, NC,
NJ, PA). In 2010, 14 states were observed at 7 or more locations (CA,
CO, FL, MA, MD, NC, NE, NJ, NY, OH, PA, SC, TX, WA).

# Construct a dataset

``` r
excellent_data <- brfss_clean %>% 
  filter(response == "Excellent") %>%
  group_by(year, locationabbr) %>%
  summarise(avg_data_value = mean(data_value, na.rm = TRUE), .groups = "drop")

ggplot(excellent_data, aes(x = year, y = avg_data_value, group = locationabbr, color = locationabbr)) +
  geom_line() +
  labs(title = "Average Value of 'Excellent' Responses Over Time by State",
       x = "Year", y = "Average Value") +
  theme_minimal() 
```

![](p8105_hw3_sw3737_files/figure-gfm/unnamed-chunk-4-1.png)<!-- -->
